<script src="https://3dmakernow.com/wp-content/bower_components/webcomponentsjs/webcomponents-loader.js"></script>
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/polymer/polymer.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-pages/iron-pages.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-icon/iron-icon.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-icons/iron-icons.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-icons/device-icons.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-icons/image-icons.html">
<link rel="import" href="https://3dmakernow.com/wp-content/bower_components/iron-ajax/iron-ajax.html">
<adom-3dcompara></adom-3dcompara>

<dom-module id="adom-3dcompara">
  <template>
    <custom-style>
      <style is="custom-style">
        .card-selector {
          margin: 20px 0;
          padding: 20px;
          color: #222222;
          border-radius: 6px;
          font-weight: 100;
          font-size: 22px;
          background-color: #fff;
          box-shadow: 0 14px 28px rgba(0, 0, 0, 0.25), 0 10px 10px rgba(0, 0, 0, 0.22);
        }

        .selector-list {
          display: flex;
          flex-direction: row;
          justify-content: space-between;
          list-style: none;
          margin: 0;
          padding: 0;
        }

        .selector-list-button {
          background-color: #fff;
          border-radius: 50%;
          border: 1px solid #49b2a1;
          color: #49b2a1;
          padding: 10px;
          width: 50px;
          height: 50px;
          position: relative;
          cursor: pointer
        }

        .selector-list-button:focus {
          outline: none;
        }

        .line {
          border-bottom: 1px solid #e0e0e0;
          transform: translateY(25px);
        }

        .selected-circle {
          border-radius: 50%;
          width: 48px;
          height: 48px;
          position: absolute;
          border: 1px solid #49b2a1;
          background-color: #fff;
          transform-origin: center;
          transition: transform 200ms ease;
        }

        .card-selector-body {
          padding: 20px;
        }

        .body-content {
          color: #7f7f7f
        }

        .body-content-selector {
          display: flex;
          flex-direction: row;
          justify-content: space-between;
          flex-wrap: wrap;
        }

        .body-content-selector-item {
          width: 200px;
          height: 150px;
          padding: 10px;
          border: 1px solid #e0e0e0;
          background-color:  #f7f7f7;
          box-sizing: border-box;
          cursor: pointer;
          font-size: 22px;
          font-weight: 100;
          color: #7f7f7f;
          margin: 8px;
        }

        .body-content-selector-item.big {
          width: 300px;
          height: 210px;
        }

        .body-content-selector-item:hover{
          border: 3px solid #49b2a1;
          background-color:  #ffffff;
        }

        .body-content-selector-item.selected{
          pointer-events: none;
          border: 3px solid #49b2a1;
          background-color:  #ffffff;
        }
        
        .level {
          background-position: top;
          display: flex;
          justify-content: flex-end;
          width: 100%;
          height: 100%;
          flex: 1;
          flex-direction: column;
          align-items: center;
        }

        .notification-error {
          color: #e7444f;
          background-color: #ffd3d4;
          border: 1px solid #e7444f;
          border-radius: 6px;
          box-sizing: border-box;
          padding: 10px;
          margin: 10px;
        }

        .resume-table {
          display: flex;
          max-width: 820px;
          flex-wrap: wrap;
          background-color: #49b2a1;
          padding: 3px;
          border-radius: 3px;
          font-size: 18px;
          overflow: auto;
        }

        .resume-table .row {
          display: flex;
          flex: 1;
          flex-basis: 100%;
        }

        .col {
          padding: 5px;
          border-bottom: 1px solid #49b2a1;
          border-left: 1px solid #49b2a1;
          background-color: #ffffff;
          line-height: 2;
        } 
        
        .head {
          background-color: #49b2a1;
          color: #fff;
        } 
        
        .col-33 {
          flex-basis: 33%;
          min-width: 260px;
        }
        
        .col-66 {
          flex-basis: 66%;
        }

        .center {
          text-align: center;
        }

        .card-selector-footer {
          display: flex;
          flex-direction: row;
          padding: 20px;
          border-top: 1px solid #49b2a1;
          justify-content: space-between;
        }

        .flex-center {
          justify-content: center;
        }

        .margin-top {
          margin-top: 1em;
        }
        .margin-bottom {
          margin-bottom: 1em;
        }

        .overflow {
          overflow: auto;
        }

        .justify-center {
          justify-content: center;
        }

        .no-wrap {
          flex-wrap: nowrap;
        }

        .result-card {
          min-width: 300px;
          border: 1px solid #e0e0e0;
          background-color: #f7f7f7;
          box-sizing: border-box;
          font-size: 22px;
          font-weight: 100;
          color: #7f7f7f;
          margin: 8px;
          border-radius: 3px;
        }

        .result-card:hover {
          border: 1px solid #49b2a1;
          background-color: #fff;
        }

        .result-card-head {
          height: 300px;
          position: relative;
        }

        .result-card-head-name {
          color: #49b2a1;
          width: 100%;
          display: flex;
          padding: 5px;
          box-sizing: border-box;
          bottom: 0;
          position: absolute;
          background: rgba(0,0,0,0.8);
        }

        .result-card-body {
          padding: 8px;
          position: relative;
          font-size: 18px;
        }

        .result-card-body-row {
          display: flex;
          flex-basis: 100%;
        }

        .result-card-body-col {
          flex: 1;
          padding: 5px;
        }

        .result-card-footer {
          display: flex;
          position: relative;
          justify-content: space-between;
          align-items: center;
          text-align: center;
        }

        .result-card-footer a {
          flex: 1;
          color: #fff;
          text-decoration: none;
          font-size: 20px;
          padding: 15px 5px;
          box-sizing: border-box;
        }

        .result-card-footer a.more-info {
          background-color: #222222;
          transition: background 200ms ease;
        }

        .result-card-footer a.more-info:hover, .result-card-footer a.more-info:focus {
          background-color: #3f3f3f;
        }

        .result-card-footer a.buy {
          background-color: #49b2a1;
          transition: background 200ms ease;
        }

        .result-card-footer a.buy:hover, .result-card-footer a.buy:focus {
          background-color: #005d58;
        }

        .actionButtons {
          padding: 10px 20px;
          border-radius: 6px;
        }

        .actionButtons:focus {
          outline: none;
        }

        .green {
          color:#66a935;
        }

        .orange {
          color:#f0ab34;
        }

        .red {
          color:#ef6644;
        }

        .next {
          background-color: #222222;
          color: #ffffff;
          border: 1px solid #222222;
        }

        .next:hover {
          background-color:#49b2a1;
          border: 1px solid #49b2a1;
          cursor: pointer;
        }

        .prev {
          background-color: #ffffff;
          color: #49b2a1;
          border: 1px solid #49b2a1;
        }

        .prev:hover {
          background-color: #ffffff;
          color: #222222;
          border: 1px solid #222222;
          cursor: pointer;
        }

        .completed {
          background-color: #49b2a1;
          color: #fff;
        }

        .disabled {
          pointer-events: none;
          background-color: #f7f7f7;
          border: 1px solid #e0e0e0;
          color: #e0e0e0;
          cursor: not-allowed;
        }

        @media (max-width: 769px) {
          .body-content-selector {
            flex-direction: column;
          }
          .body-content-selector-item, .body-content-selector-item.big {
            width: 100%;
            height: 250px;
          }
          .card-selector-header {
            display: none;
          }
        }

        @media (max-width: 460px) {
          .card-selector-body {
            padding: 5px;
          }
          .result-card {
            width: 95%;
          }
          .card-selector {
            padding: 0;
          }
        }

      </style>
    </custom-style>
    <div class="card-selector">
      <div class="card-selector-header">
        <div class="line"></div>
        <ul id="selectorList" class="selector-list">
          <template id="answerList" is="dom-repeat" items="{{answers}}" mutable-data>
            <li>
              <div class="selected-circle" style$="[[_computeSelected(selected, index)]]"></div>
              <button class$="selector-list-button [[_computeCompleted(item.completed)]]  [[_computeDisabled(item.disabled)]]" on-click="_selectStep">
                <iron-icon icon="[[item.icon]]"></iron-icon>
              </button>
            </li>
          </template>
          <li>
            <div class="selected-circle" id="lastSelectedCircle"></div>
            <button class="selector-list-button disabled" id="buttonLastStep" on-click="_selectLastStep">
                <iron-icon icon="icons:list"></iron-icon>
            </button>
          </li>
        </ul>
      </div>
      <div class="card-selector-body">
        <iron-pages selected="[[selected]]">
          <!-- Step 1 Experiencia-->
          <div>
            <h3 class="heading">1. ¿Cuál es tu experiencia con impresoras 3D?</h3>
            <div class="body-content">
              <p>
                Es muy importante saber que experiencia consideras que tienes para saber que tipo de impresora puede ser la ideal para tí.
                Selecciona una de las siguientes opciones para saber en que punto estás.
              </p>
              <div class="body-content-selector">
                <template is="dom-repeat" id="firstStepItems" items="[[answers.0.types]]" mutable-data>
                  <button class$="body-content-selector-item [[_computeStepSelected(item.selected)]]" on-click="_setValueFirstStepLevels">
                    <div class="level" style$="background: url([[item.background]]) no-repeat;">
                      [[item.typeLabel]]
                    </div>
                  </button>
                </template>
              </div>
            </div>
          </div>
          <!-- Step 2 Maker-->
          <div>
            <h3 class="heading">2. ¿Eres un usuario Maker?</h3>
            <div class="body-content">
              <p>Como ya sabrás, actualmente hay impresoras 3D que no vienen montadas desde su inicio, por lo tanto vas a tener que montar tu impresora cuando llegue.</p>
              <p>Estas impresoras tienen dos principales ventajas, en primer lugar que suelen tener un precio más económico y en segundo lugar que te va a permitir aprender muchísimo de tu impresora.</p>
              <p>Si decides elegir una impresora 3D ya montada no vas a tener que emplear tanto tiempo montar la impresora, y además este tipo de impresoras suelen tener garantía del fabricante.</p>
              <div class="body-content-selector">
                <template is="dom-repeat" id="secondStepItems" items="[[answers.1.types]]" mutable-data>
                  <button class$="body-content-selector-item big [[_computeStepSelected(item.selected)]]" on-click="_setValueSecondStepLevels">
                    <div class="level" style$="background: url([[item.background]]) no-repeat;">
                      [[item.typeLabel]]
                    </div>
                  </button>
                </template>
              </div>
            </div>
          </div>
          <!-- Step 3 carried-->
          <div>
            <h3 class="heading">3. ¿Vas a necesitar desplazar la impresora 3D?</h3>
            <div class="body-content">
              <p>Este es un punto al que mucha gente no le presta ninguna importancia, sin embargo, es algo importante, ten en cuenta que generalmente las impresoras suelen pesar, además suelen ser grandes y de dificil transporte.</p>
              <p>Por tanto, creemos que este punto es algo a lo que prestar atención</p>
              <p>Si para ti no es algo importante selecciona la tercera opción de me da igual, y al final te mostraremos resultado de los dos tipos.</p>
              <div class="body-content-selector">
                <template is="dom-repeat" id="thirdStepItems" items="[[answers.2.types]]" mutable-data>
                  <button class$="body-content-selector-item big [[_computeStepSelected(item.selected)]]" on-click="_setValueThirdStepLevels">
                    <div class="level" style$="background: url([[item.background]]) no-repeat;">
                      [[item.typeLabel]]
                    </div>
                  </button>
                </template>
              </div>
            </div>
          </div>
          <!-- Step 4 money-->
          <div>
            <h3 class="heading">4. ¿Cuánto dinero estás dispuesto a gastarte?</h3>
            <div class="body-content">
              <p>Por supuesto, este punto es muy importante, quizás incluso sea lo que te haga decantarte por una impresora u otra.</p>
              <p>Selecciona un rango de precios el cual estás dispuesto a gastarte en tu impresora 3D.</p>
              <div class="body-content-selector">
                <template is="dom-repeat" id="fourthStepItems" items="[[answers.3.types]]" mutable-data>
                  <button class$="body-content-selector-item [[_computeStepSelected(item.selected)]]" on-click="_setValueFourthStepLevels">
                    <div class="level" style$="background: url([[item.background]]) no-repeat;">
                      [[item.typeLabel]]
                    </div>
                  </button>
                </template>
              </div>
            </div>
          </div>
          <!-- Step 5 quality-->
          <div>
            <h3 class="heading">5. ¿Te importa mucho la calidad?</h3>
            <div class="body-content">
              <p>Por supuesto, este punto es muy importante, quizás incluso sea lo que te haga decantarte por una impresora u otra.</p>
              <p>Selecciona un rango de precios el cual estás dispuesto a gastarte en tu impresora 3D.</p>
              <div class="body-content-selector">
                <template is="dom-repeat" id="fifthStepItems" items="[[answers.4.types]]" mutable-data>
                  <button class$="body-content-selector-item [[_computeStepSelected(item.selected)]]" on-click="_setValueFifthStepLevels">
                    <div class="level" style$="background: url([[item.background]]) no-repeat;">
                      [[item.typeLabel]]
                    </div>
                  </button>
                </template>
              </div>
            </div>
          </div>
          <!-- Step 5 quality-->
          <div>
            <h3 class="heading">5. Resumen y resultados</h3>
            <div class="body-content">
              <p>A continuación aparece un resumen con los datos que has introducido. Puedes modificar los datos introducidos pulsando sobre el botón de editar.</p>
              <p>Mas abajo podrás ver la selección de impresoras 3D que hemos preparado para tí en función de los datos que has insertado:</p>
              <div class="body-content-selector flex-center margin-bottom">
                <div class="resume-table">
                  <div class="row">
                    <div class="col head col-33 first-col">Pregunta</div>
                    <div class="col head col-66 center">Respuesta</div>
                  </div>
                  <template is="dom-repeat" id="valuesList" items="[[answers]]" mutable-data>
                    <div class="row">
                      <div class="col col-33 first-col">[[item.textAnswer]]</div>
                      <div class="col col-33 center">[[item.value]]</div>
                      <div class="col col-33 center">
                        <button class="actionButtons prev" on-click="_editResult">
                          Editar
                        </button>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
              <!--<iron-ajax
                auto
                url="http://notequedesparado.com/wp-content/uploads/3d-printers.json"
                handle-as="json"
                last-response="{{response}}">
              </iron-ajax>-->
              <span>Mostrando [[_totalPrinter]] impresoras 3D que coinciden con los requisitos seleccionados:</span>
              <div class="body-content-selector margin-top no-wrap overflow">
                <template is="dom-repeat" id="idealPrinterList" items="[[response]]" mutable-data sort="_sortIdealPrinter" filter="_filterIdealPrinter" rendered-item-count="{{_totalPrinter}}">
                  <div class="result-card">
                    <div class="result-card-head" style$="background:url('[[item.printerimage]]')  no-repeat center center; background-size: cover" >
                      <span class="result-card-head-name">
                        [[item.printerName]]
                      </span>
                    </div>
                    <div class="result-card-body">
                      <div class="result-card-body-row">
                        <div class="result-card-body-col">Dificultad</div>
                        <iron-icon icon="[[_computeExperienceIcon(item.experience.dificult)]]" class$="[[_computeExperienceIconColor(item.experience.dificult)]]"></iron-icon>
                        <div class="result-card-body-col">
                          [[item.experience.dificult]] 
                        </div>
                      </div>
                      <div class="result-card-body-row">
                        <div class="result-card-body-col">Montaje</div>
                        <iron-icon icon="[[_computeBuildIcon(item.maker.build)]]"></iron-icon>
                        <div class="result-card-body-col">
                          [[item.maker.build]] 
                        </div>
                      </div>
                      <div class="result-card-body-row">
                        <div class="result-card-body-col">Dimensiones</div>
                        <iron-icon icon="image:photo-size-select-small"></iron-icon>
                        <div class="result-card-body-col">
                          [[item.dimensions.volume]] 
                        </div>
                      </div>
                      <div class="result-card-body-row">
                        <div class="result-card-body-col">Precio</div>
                        <iron-icon icon="icons:euro-symbol"></iron-icon>
                        <div class="result-card-body-col">
                          [[item.price]] €
                        </div>
                      </div>
                      <div class="result-card-body-row">
                        <div class="result-card-body-col">Calidad</div>
                        <iron-icon icon="[[_computeQualityIcon(item.quality)]]" class$="[[_computeQualityIconColor(item.quality)]]"></iron-icon>
                        <div class="result-card-body-col">
                          [[item.quality]] 
                        </div>
                      </div>
                    </div>
                    <div class="result-card-footer">
                      <a href="[[item.moreInformation]]" class="more-info">
                        Más información
                      </a>
                      <a href="[[item.buy]]" class="buy" target="_blank" rel="nofollow">
                        Comprar
                      </a>
                    </div>
                  </div>
                </template>
                
              </div>
            </div>
          </div>
        </iron-pages>
      </div>
      <div class="notification-error" id="notificationError" hidden="true">
        Selecciona una de las opciones que aparecen más arriba
      </div>
      <div class="card-selector-footer">
        <button class="actionButtons prev" on-click="_previus">
          <span>anterior</span>
        </button>
        <button class="actionButtons next" on-click="_next">
          <span>Siguiente</span>
        </button>
      </div>
    </div>
  </template>
</dom-module>
<script>
  window.addEventListener('WebComponentsReady', () => {
    class adom3dcompara extends Polymer.Element {
      static get is() {
        return 'adom-3dcompara';
      }

      static get properties() {
        return {
          selected: {
            type: Number,
            value: 0
          },
          answers: {
            type: Array,
            value: function () {
              return [{
                value: 'undefined',
                textAnswer: 'Experiencia',
                types: [{
                  typeLabel: 'Principiante',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/principiante.svg',
                  selected: false
                },
                {
                  typeLabel: 'Intermedio',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/intermedio.svg',
                  selected: false
                },
                {
                  typeLabel: 'Avanzado',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/avanzado.svg',
                  selected: false
                }],
                icon: 'icons:view-carousel',
                completed: false,
                disabled: false
              }, {
                value: 'undefined',
                textAnswer: 'Montaje de la impresora 3D',
                types: [{
                  typeLabel: 'Impresora 3D montada',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/montada.svg',
                  selected: false
                },
                {
                  typeLabel: 'Impresora 3D para montar',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/para-montar.svg',
                  selected: false
                }],
                icon: 'icons:build',
                completed: false,
                disabled: true
              }, {
                value: 'undefined',
                textAnswer: 'Desplazamiento de la impresora 3D',
                types: [{
                  typeLabel: 'Se va a desplazar',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/con-transporte.svg',
                  selected: false
                },
                {
                  typeLabel: 'No se va a desplazar',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/sin-transporte.svg',
                  selected: false
                },
                {
                  typeLabel: 'Me da igual',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/indeterminado-transporte.svg',
                  selected: false
                }],
                icon: 'icons:card-travel',
                completed: false,
                disabled: true
              }, {
                value: 'undefined',
                textAnswer: 'Precio',
                types: [{
                  typeLabel: 'De 0 a 300 €',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/low-money.svg',
                  selected: false
                },
                {
                  typeLabel: 'Entre 301 - 600 €',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/intermediate-money.svg',
                  selected: false
                },
                {
                  typeLabel: 'Más de 600 €',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/high-money.svg',
                  selected: false
                }],
                icon: 'icons:euro-symbol',
                completed: false,
                disabled: true
              }, {
                value: 'undefined',
                textAnswer: 'Calidad',
                types: [{
                  typeLabel: 'Calidad oro',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/gold.svg',
                  selected: false
                },
                {
                  typeLabel: 'Calidad plata',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/silver.svg',
                  selected: false
                },
                {
                  typeLabel: 'Calidad bronce',
                  background: 'http://notequedesparado.com/wp-content/uploads/2018/04/bronze.svg',
                  selected: false
                }],
                icon: 'icons:star-half',
                completed: false,
                disabled: true
              }];
            }
          },
          response: {
            type: Array,
            value: function() {
              return [{
                "printerName": "Anet A8",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61uZ-K4dBGL._SX425_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "8 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "510x400x415"
                },
                "price": 170,
                "quality": "Media",
                "moreInformation": "./anet-a8",
                "buy": "https://www.amazon.es/Anet-Impresora-diversidad-material-Impresi%C3%B3n/dp/B075TZPX5G"
              },{
                "printerName": "Anycubic i3 MEGA Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61OeIv3kdNL._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "420x450x430"
                },
                "price": 350,
                "quality": "Buena",
                "moreInformation": "./anycubic-i3-mega-opiniones-valoracion-analisis",
                "buy": "https://www.amazon.es/Anycubic-Impresora-Pulgadas-Impresi%C3%B3n-%CF%86210x210x205mm/dp/B06XK7VYX9"
              },
              {
                "printerName": "Creality CR-10s Aibecy 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/71tJ-DtYEeL._SY355_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "1 hora"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "200x300x400"
                },
                "price": 520,
                "quality": "Buena",
                "moreInformation": "./creality-cr-10s-aibecy-3d",
                "buy": "https://www.amazon.es/Creality-Aibecy-Impresora-Impresión-Filamento/dp/B0772QF2FQ"
              },
              {
                "printerName": "ANYCUBIC​ 3D​ ​Impresora Versión ​​Lineal ​Kossel ​​Plus",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61UuCY0zDiL._SX425_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "4 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "10kg"
                },
                "price": 350,
                "quality": "Buena",
                "moreInformation": "./anycubic-3d-impresora-lineal-kossel-plus",
                "buy": "https://www.amazon.es/ANYCUBIC-Impresora-Versión-Autocalibración-autolevel/dp/B076H2KJVG"
              },
              {
                "printerName": "Geeetech Impresora 3D de madera Prusa I3",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/71fpiSWUuUL._SX425_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "9 horas"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "10kg"
                },
                "price": 200,
                "quality": "Media",
                "moreInformation": "./geeetech-impresora-3d-de-madera-prusa-i3",
                "buy": "https://www.amazon.es/Impresora-escritorio-bricolaje-200x200x180mm-impresión/dp/B075FQRNY3"
              },
              {
                "printerName": "Anycubic Prusa i3 Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61mDMg6A-zL._SX466_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "printerScore": 7,
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "10 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "475x410x460"
                },
                "price": 250,
                "quality": "Buena",
                "moreInformation": "./anycubic-prusa-i3-impresora-3d",
                "buy": "https://www.amazon.es/Impresora-plataforma-patentada-Ultrabase-φ210x210x250/dp/B074DQZCLT"
              },
              {
                "printerName": "Geeetech impresora 3D E180",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/51rM1bSIg2L._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "6Kg"
                },
                "price": 300,
                "quality": "Buena",
                "moreInformation": "./geeetech-impresora-3d-e180",
                "buy": "https://www.amazon.es/impresora-Impresora-incorporado-recuperación-aplicación/dp/B076P63G2Y"
              },
              {
                "printerName": "Anet A6 Kits de Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/7167OhjMPFL._SY450_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "10 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "480x400x400"
                },
                "price": 250,
                "quality": "Media",
                "moreInformation": "./anet-a6",
                "buy": "https://www.amazon.es/Anet-Impresora-Repulsi%C3%B3n-Bricolaje-Impresi%C3%B3n/dp/B01N4KT3SC"
              },
              {
                "printerName": "Monoprice Select Mini 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61f5KmW6vwL._SX466_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "120x120x120"
                },
                "price": 250,
                "quality": "Media",
                "moreInformation": "./monoprice-select-mini-3d",
                "buy": "https://www.amazon.es/Monoprice-Impresora-Construcci%C3%B3n-Calentada-Adaptador/dp/B06XXMRFHR"
              },
              {
                "printerName": "BQ Witbox 2 - Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/81JrwHYHhqL._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "500x480x460"
                },
                "price": 1500,
                "quality": "Buena",
                "moreInformation": "./bq-witbox-2-impresora-3d",
                "buy": "https://www.amazon.es/BQ-Witbox-Impresora-resoluci%C3%B3n-velocidad/dp/B0196K6C88"
              },
              {
                "printerName": "ANYCUBIC PHOTON Impresora DLP Luz UV 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/41YymyqconL._SX425_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "220x220x400"
                },
                "price": 500,
                "quality": "Buena",
                "moreInformation": "./bq-witbox-2-impresora-3d",
                "buy": "https://www.amazon.es/ANYCUBIC-Impresora-Montada-Pantalla-impresión/dp/B078TCT7P5"
              },
              {
                "printerName": "Athorbot Brother impresora 3d prusa i3",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61CJCaupT%2BL._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "16kg"
                },
                "price": 500,
                "quality": "Buena",
                "moreInformation": "./Athorbot-brother-impresora-3d-prusa-i3",
                "buy": "https://www.amazon.es/Athorbot-Brother-impresora-Imprimir-Construcci%C3%B3n/dp/B073S1JX2B"
              },
              {
                "printerName": "Anet E10 Marco de Aluminio",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61cUIMQ7hBL._SX466_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "2 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "220x270x300"
                },
                "price": 290,
                "quality": "Media",
                "moreInformation": "./anet-e10-marco-de-aluminio",
                "buy": "https://www.amazon.es/Anet-Aluminio-Multi-idioma-Impresora-Bricolaje/dp/B074H272WR"
              },
              {
                "printerName": "Monoprice Maker Select V2",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61-E0NlrKUL._SX450_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "2 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "500x480x280"
                },
                "price": 350,
                "quality": "Mala",
                "moreInformation": "./monoprice-maker-select-v2",
                "buy": "https://www.amazon.es/Monoprice-Printer-Impresora-Enchufe-121870/dp/B06XXPJSXM"
              },
              {
                "printerName": "Creality CR-10 Aibecy 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61D6V4Qww9L._SX522_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "500x480x280"
                },
                "price": 500,
                "quality": "Buena",
                "moreInformation": "./creality-cr-10-aibecy-3d",
                "buy": "https://www.amazon.es/Creality-Aibecy-Impresora-Impresi%C2%A8%C2%AEn-Filamento/dp/B0772M4M5Q"
              },
              {
                "printerName": "Creality CR-10s Aibecy 3d",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61GoK1NcuqL._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "500x480x280"
                },
                "price": 550,
                "quality": "Buena",
                "moreInformation": "./creality-cr-10s-aibecy-3d",
                "buy": "https://www.amazon.es/Creality-Aibecy-Impresora-Impresi%C2%A8%C2%AEn-Filamento/dp/B0772RW712"
              },
              {
                "printerName": "Tronxy Impresora 3D de Escritorio",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61UettD1PjL._SX425_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "220x220x220"
                },
                "price": 170,
                "quality": "Mala",
                "moreInformation": "./tronxy-impresora3d-de-escritorio",
                "buy": "https://www.amazon.es/Tronxy-Impresora-Escritorio-Apoyar-Muti-idoma/dp/B07849B2YM"
              },
              {
                "printerName": "Impresora Acrílica 3D Geeetech Prusa I3",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/51btpEFWpFL._SX466_.jpg",
                "experience": {
                  "dificult": "Avanzada",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "15 horas"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "220x220x180"
                },
                "price": 200,
                "quality": "Media",
                "moreInformation": "./impresora-acrilica-3d-geeetech-prusa-i3",
                "buy": "https://www.amazon.es/Impresora-Acr%C3%ADlica-Geeetech%C2%AE-Pro-Calidad/dp/B01GJDO9I0"
              },
              {
                "printerName": "BQ Hephestos 2 - Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/41aVMdPlcZL._SX425_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "5 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "510x660x450"
                },
                "price": 800,
                "quality": "Intermedia",
                "moreInformation": "./bq-hephestos-2-impresora-3d",
                "buy": "https://www.amazon.es/BQ-Hephestos-Impresora-resoluci%C3%B3n-velocidad/dp/B0196V84UG/"
              },
              {
                "printerName": "BQ Hephestos - Impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/81yEGjoX06L._SX466_.jpg",
                "experience": {
                  "dificult": "Intermedia",
                },
                "score": 0,
                "maker": {
                  "forBuild": true,
                  "build": "10 horas"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "14kg"
                },
                "price": 500,
                "quality": "Intermedia",
                "moreInformation": "./bq-hephestos-impresora-3d",
                "buy": "https://www.amazon.es/BQ-Hephestos-Impresora-resoluci%C3%B3n-velocidad/dp/B01N2S1NO0"
              },
              {
                "printerName": "GIANTARM Mecreator2 impresora 3D",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/61PClyeEM0L._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": true,
                  "volume": "320x360x320"
                },
                "price": 350,
                "quality": "Buena",
                "moreInformation": "./giantarm-crecreator2-impresora-3d",
                "buy": "https://www.amazon.es/Mecreator2-ensamblada-resistente-compatible-filamentos/dp/B01EFFWER2"
              },
              {
                "printerName": "BIBO Impresora 3D De Marco Metálico",
                "printerimage": "https://images-na.ssl-images-amazon.com/images/I/615bvtQjxHL._SX466_.jpg",
                "experience": {
                  "dificult": "Básica",
                },
                "score": 0,
                "maker": {
                  "forBuild": false,
                  "build": "-"
                },
                "dimensions": {
                  "carry": false,
                  "volume": "510x430x400"
                },
                "price": 800,
                "quality": "Buena",
                "moreInformation": "./bibo-impresora-3d-de-marco-metalico",
                "buy": "https://www.amazon.es/BIBO-Impresora-Extrusora-Impresi%C3%B3n-Desmontable/dp/B01LNADH8M"
              }]
            }
          },
          _totalPrinter: {
            type: Number,
            value: 0
          }
        }
      };

    _next() {
      /**
      * Following the steps with numbers 1 - 5
      */
      if (this.selected <= this.answers.length - 1) {
        if (this.answers[this.selected].value !== 'undefined') {
          this.answers[this.selected].completed = true;
          this.answers[this.selected].disabled = false;
          if (this.answers[this.selected + 1]) {
            this.answers[this.selected + 1].disabled = false;
          } else {
            this.$.lastSelectedCircle.style.transform = 'scale(1.3)';
            this.$.buttonLastStep.classList.remove('disabled');
            this.$.valuesList.render();
            this._getIdealPrinter();
          }
          this.selected = this.selected + 1;
        } else {
          this.$.notificationError.hidden = false;
        }
      }
      this.$.answerList.render();
    }

    _previus() {
      if (this.selected > 0) {
        this.$.notificationError.hidden = true;
        this.$.lastSelectedCircle.style.transform = 'scale(1)';
        this.selected = this.selected - 1;
      }
    }

    _computeDisabled(disabled) {
      return disabled ? 'disabled' : '';
    }

    _computeCompleted(completed) {
      return completed ? 'completed' : '';
    }

    _computeSelected(item, i) {
      return item === i ? 'transform: scale(1.3);' : 'transform: scale(1);';
    }

    _selectStep(e) {
      this.$.lastSelectedCircle.style.transform = 'scale(1)';
      this.selected = e.model.index;
      this.$.notificationError.hidden = true;
    }

    _selectLastStep() {
      this.$.lastSelectedCircle.style.transform = 'scale(1.3)';
      this.selected = this.answers.length;
      this.$.valuesList.render();
      this._getIdealPrinter();
    }
    /*
    * Set a valid value from firstStep
    */
    _setValueFirstStepLevels(e) {
      let types = this.answers[this.selected].types;
      let that = this;
      types.forEach(function(element, index) {
        if (e.model.index === index) {
          types[e.model.index].selected = true;
          that.answers[that.selected].value = types[e.model.index].typeLabel;
          that.$.notificationError.hidden = true;
        } else {
          types[index].selected = false;
        }
      });
      this.$.firstStepItems.render();
    }
    /*
    * Set a valid value from secondStep
    */
    _setValueSecondStepLevels(e) {
      let types = this.answers[this.selected].types;
      let that = this;
      types.forEach(function(element, index) {
        if (e.model.index === index) {
          types[e.model.index].selected = true;
          that.answers[that.selected].value = types[e.model.index].typeLabel;
          that.$.notificationError.hidden = true;
        } else {
          types[index].selected = false;
        }
      });
      this.$.secondStepItems.render();
    }
    /*
    * Set a valid value from thirdStep
    */
    _setValueThirdStepLevels(e) {
      let types = this.answers[this.selected].types;
      let that = this;
      types.forEach(function(element, index) {
        if (e.model.index === index) {
          types[e.model.index].selected = true;
          that.answers[that.selected].value = types[e.model.index].typeLabel;
          that.$.notificationError.hidden = true;
        } else {
          types[index].selected = false;
        }
      });
      this.$.thirdStepItems.render();
    }
    /*
    * Set a valid value from fourthStep
    */
    _setValueFourthStepLevels(e) {
      let types = this.answers[this.selected].types;
      let that = this;
      types.forEach(function(element, index) {
        if (e.model.index === index) {
          types[e.model.index].selected = true;
          that.answers[that.selected].value = types[e.model.index].typeLabel;
          that.$.notificationError.hidden = true;
        } else {
          types[index].selected = false;
        }
      });
      this.$.fourthStepItems.render();
    }
    /*
    * Set a valid value from fifthStep
    */
    _setValueFifthStepLevels(e) {
      let types = this.answers[this.selected].types;
      let that = this;
      types.forEach(function(element, index) {
        if (e.model.index === index) {
          types[e.model.index].selected = true;
          that.answers[that.selected].value = types[e.model.index].typeLabel;
          that.$.notificationError.hidden = true;
        } else {
          types[index].selected = false;
        }
      });
      this.$.fifthStepItems.render();
    }
    _computeStepSelected(item) {
      return item ? 'selected' : '';
    }

    _editResult(e) {
      this.selected = e.model.index;
      this.$.lastSelectedCircle.style.transform = 'scale(1)';
    }
    /**
    * Show differents icons with the dificult of the printer
    */
    _computeExperienceIcon(experience) {
      switch (experience) {
        case 'Básica':
          return 'device:signal-cellular-1-bar';
          break;
        
        case 'Intermedia':
          return 'device:signal-cellular-3-bar';
          break;
        
        case 'Avanzada':
          return 'device:signal-cellular-4-bar';
          break;
      
        default:
          return 'icons:error';
          break;
      }
    }
    /**
    * Show differents icons with the dificult of the printer
    */
    _computeExperienceIconColor(experience) {
      switch (experience) {
        case 'Básica':
          return 'green';
          break;
        
        case 'Intermedia':
          return 'orange';
          break;
        
        case 'Avanzada':
          return 'red';
          break;
      
        default:
          return '';
          break;
      }
    }
    /**
    * Show differents icons with the build of the printer
    */
    _computeBuildIcon(build) {
      switch (build) {
        case '-':
          return 'icons:error';
          break;
      
        default:
          return 'icons:build';
          break;
      }
    }
    /**
    * Show differents icons with the quality of the printer
    */
    _computeQualityIcon(quality) {
      switch (quality) {
        case 'Mala':
          return 'icons:star-border';
          break;
        
        case 'Media':
          return 'icons:star-half';
          break;
        
        case 'Buena':
          return 'icons:star';
          break;
      
        default:
          return 'icons:error';
          break;
      }
    }
    /**
    * Show differents icons with the quality of the printer
    */
    _computeQualityIconColor(quality) {
      switch (quality) {
        case 'Mala':
          return 'red';
          break;
        
        case 'Media':
          return 'orange';
          break;
        
        case 'Buena':
          return 'green';
          break;
      
        default:
          return '';
          break;
      }
    }

    _getIdealPrinter() {
      let answers = this.answers;
      this.response.forEach(function(element) {
        let score = 0;
        let scoreExperience = 0;
        let scoreBuilding = 0;
        let scoreCarry = 0;
        let scorePrice = 0;
        let scoreQuality = 0;
        let extraScoreQuality = 0;
        /*
        * Set Experience
        */
        if((answers[0].value === 'Principiante') && (element.experience.dificult === 'Básica')) {
          scoreExperience = 10;
        }
        if((answers[0].value === 'Intermedio') && (element.experience.dificult === 'Intermedia')) {
          scoreExperience = 10;
        }
        if((answers[0].value === 'Avanzado') && (element.experience.dificult === 'Avanzada')) {
          scoreExperience = 10;
        }
        /*
        * Set Building
        */
        if((answers[1].value === 'Impresora 3D montada') && (!element.maker.forBuild)) {
          scoreBuilding = 30;
        }
        if((answers[1].value === 'Impresora 3D para montar') && (element.maker.forBuild)) {
          scoreBuilding = 30;
        }
        /*
        * Set Carry
        */
        if((answers[2].value === 'Se va a desplazar') && (element.dimensions.carry)) {
          scoreCarry = 20;
        } else {
          scoreCarry = 0;
        }
        /*
        * Set Price
        */
        if((answers[3].value === 'De 0 a 300 €') && (element.price < 300)) {
          scorePrice = 30;
        }
        if((answers[3].value === 'Entre 301 - 600 €') && (element.price < 600 )) {
          scorePrice = 20;
        }
        if((answers[3].value === 'Más de 600 €') && (element.price < 10000 )) {
          scorePrice = 15;
        }
        /*
        * Set Price
        */
        if((answers[4].value === 'Calidad bronce') && (element.quality === 'Mala')) {
          scoreQuality = 10;
        }
        if((answers[4].value === 'Calidad plata') && (element.quality === 'Media')) {
          scoreQuality = 20;
        }
        if((answers[4].value === 'Calidad oro') && (element.quality === 'Buena')) {
          scoreQuality = 30;
        }
        if(element.quality === 'Mala') {
          extraScoreQuality = -10;
        }
        if(element.quality === 'Buena') {
          extraScoreQuality = 10;
        }
        score = scoreExperience + scoreBuilding + scoreCarry + scorePrice + scoreQuality + extraScoreQuality;
        element.score = score;
      })
      this.$.idealPrinterList.render();
    }

    _sortIdealPrinter(a, b) {
      return b.score - a.score;
    }

    _filterIdealPrinter(printer) {
      return printer.score > 50 ? true : false;
    }
  }
  customElements.define(adom3dcompara.is, adom3dcompara);
  });
</script>